version: "3.1"

# ========================================
# Intents (intentions reconnues par le NLU)
# ========================================
intents:
  - saluer
  - au_revoir
  - remercier
  - voir_demandes
  - chercher_reference
  - soumettre_demande
  - types_demandes
  - delais_traitement
  - contact
  - demander_aide
  - faq_attestation_travail
  - faq_attestation_salaire
  - faq_conge
  - faq_ordre_mission
  - faq_probleme_technique
  - affirmer
  - nier

# ========================================
# Entities (donnÃ©es extraites des messages)
# ========================================
entities:
  - reference

# ========================================
# Slots (mÃ©moire du chatbot pendant la conversation)
# ========================================
slots:
  reference:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: reference
  user_id:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

# ========================================
# Responses (rÃ©ponses textuelles du bot)
# ========================================
responses:
  utter_saluer:
    - text: |
        Bonjour ! ğŸ‘‹ Je suis l'assistant virtuel de la plateforme de gestion des demandes administratives.

        Comment puis-je vous aider aujourd'hui ?
      buttons:
        - title: "ğŸ“‹ Voir mes demandes"
          payload: "/voir_demandes"
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "ğŸ“‚ Types de demandes"
          payload: "/types_demandes"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_au_revoir:
    - text: |
        Au revoir ! ğŸ‘‹ N'hÃ©sitez pas Ã  revenir si vous avez besoin d'aide.

        Bonne continuation !

  utter_remercier:
    - text: |
        Je vous en prie ! N'hÃ©sitez pas si vous avez d'autres questions.

        Bonne journÃ©e ! ğŸ˜Š
      buttons:
        - title: "ğŸ“‹ Voir mes demandes"
          payload: "/voir_demandes"
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_soumettre_demande:
    - text: |
        **Pour soumettre une nouvelle demande** :

        1. Rendez-vous dans le menu **"Soumettre une demande"**
        2. Remplissez le formulaire avec :
           â€¢ **Titre** de votre demande
           â€¢ **Type** de demande
           â€¢ **Description** dÃ©taillÃ©e
           â€¢ **Fichier joint** (optionnel)
        3. Cliquez sur **"Soumettre"**

        Votre demande recevra automatiquement une rÃ©fÃ©rence unique (ex: REF-12345).
      buttons:
        - title: "ğŸ“‹ Voir mes demandes"
          payload: "/voir_demandes"
        - title: "ğŸ“‚ Types de demandes"
          payload: "/types_demandes"
        - title: "â± DÃ©lais de traitement"
          payload: "/delais_traitement"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_types_demandes:
    - text: |
        **Types de demandes disponibles** :

        â€¢ **Attestation de travail** â€” Certificat de votre emploi
        â€¢ **Attestation de salaire** â€” Justificatif de revenus
        â€¢ **Demande de congÃ©** â€” CongÃ© annuel, maladie, etc.
        â€¢ **Ordre de mission** â€” DÃ©placement professionnel
        â€¢ **Autre** â€” Toute autre demande administrative

        Choisissez le type appropriÃ© lors de la soumission.
      buttons:
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "ğŸ“‹ Voir mes demandes"
          payload: "/voir_demandes"
        - title: "â± DÃ©lais de traitement"
          payload: "/delais_traitement"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_delais_traitement:
    - text: |
        **DÃ©lais de traitement estimÃ©s** :

        | Type de demande | DÃ©lai estimÃ© |
        |---|---|
        | Attestation de travail | 2-3 jours ouvrables |
        | Attestation de salaire | 3-5 jours ouvrables |
        | Demande de congÃ© | 1-2 jours ouvrables |
        | Ordre de mission | 3-5 jours ouvrables |
        | Autre | Variable |

        Ces dÃ©lais sont indicatifs et peuvent varier selon la charge de travail.
      buttons:
        - title: "ğŸ“‹ Voir mes demandes"
          payload: "/voir_demandes"
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "ğŸ“ Contact"
          payload: "/contact"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_contact:
    - text: |
        **Contacter l'administration** :

        â€¢ **Email** : admin@gestion-demandes.ma
        â€¢ **TÃ©lÃ©phone** : +212 5XX-XXXXXX
        â€¢ **Adresse** : Bureau des affaires administratives
        â€¢ **Horaires** : Lundi - Vendredi, 08h00 - 17h00

        Vous pouvez aussi utiliser la messagerie interne pour contacter directement un administrateur.
      buttons:
        - title: "ğŸ“‹ Voir mes demandes"
          payload: "/voir_demandes"
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_aide:
    - text: |
        **Comment puis-je vous aider ?**

        Voici ce que je peux faire pour vous :

        â€¢ **Voir mes demandes** â€” Consulter le statut de vos demandes
        â€¢ **Soumettre une demande** â€” Guide pour crÃ©er une nouvelle demande
        â€¢ **Chercher par rÃ©fÃ©rence** â€” Tapez ex: REF-12345
        â€¢ **Types de demandes** â€” Les catÃ©gories disponibles
        â€¢ **DÃ©lais de traitement** â€” Temps estimÃ© par type
        â€¢ **Contact** â€” Joindre l'administration
        â€¢ **FAQ** â€” Questions frÃ©quentes sur les procÃ©dures

        Vous pouvez aussi taper directement une rÃ©fÃ©rence (ex: REF-12345).
      buttons:
        - title: "ğŸ“‹ Voir mes demandes"
          payload: "/voir_demandes"
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "ğŸ“‚ Types de demandes"
          payload: "/types_demandes"
        - title: "â± DÃ©lais de traitement"
          payload: "/delais_traitement"

  utter_faq_attestation_travail:
    - text: |
        **Attestation de travail** :

        ğŸ“„ C'est un document officiel qui certifie que vous Ãªtes employÃ© dans votre Ã©tablissement.

        **ProcÃ©dure** :
        1. Soumettez une demande de type "Attestation de travail"
        2. Pas de document supplÃ©mentaire nÃ©cessaire
        3. DÃ©lai : 2-3 jours ouvrables

        L'attestation sera disponible en tÃ©lÃ©chargement une fois validÃ©e.
      buttons:
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_faq_attestation_salaire:
    - text: |
        **Attestation de salaire** :

        ğŸ’° C'est un justificatif officiel de vos revenus.

        **ProcÃ©dure** :
        1. Soumettez une demande de type "Attestation de salaire"
        2. PrÃ©cisez dans la description la pÃ©riode souhaitÃ©e
        3. DÃ©lai : 3-5 jours ouvrables

        Utile pour les dÃ©marches bancaires, de location, etc.
      buttons:
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_faq_conge:
    - text: |
        **Demande de congÃ©** :

        ğŸ—“ Types de congÃ©s disponibles :
        â€¢ CongÃ© annuel
        â€¢ CongÃ© maladie (avec justificatif mÃ©dical)
        â€¢ CongÃ© sans solde
        â€¢ CongÃ© exceptionnel (mariage, naissance, dÃ©cÃ¨s)

        **ProcÃ©dure** :
        1. Soumettez une demande de type "Demande de congÃ©"
        2. PrÃ©cisez les dates et le type de congÃ©
        3. Joignez un justificatif si nÃ©cessaire
        4. DÃ©lai : 1-2 jours ouvrables
      buttons:
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_faq_ordre_mission:
    - text: |
        **Ordre de mission** :

        âœˆï¸ Document nÃ©cessaire pour tout dÃ©placement professionnel.

        **ProcÃ©dure** :
        1. Soumettez une demande de type "Ordre de mission"
        2. PrÃ©cisez : destination, dates, motif du dÃ©placement
        3. Joignez le programme/invitation si disponible
        4. DÃ©lai : 3-5 jours ouvrables
      buttons:
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_faq_probleme_technique:
    - text: |
        **En cas de problÃ¨me technique** :

        ğŸ”§ Essayez ces Ã©tapes :
        1. RafraÃ®chissez la page (F5)
        2. Videz le cache de votre navigateur
        3. Essayez avec un autre navigateur (Chrome, Firefox)
        4. VÃ©rifiez votre connexion internet

        Si le problÃ¨me persiste, contactez l'administration :
        ğŸ“§ admin@gestion-demandes.ma
      buttons:
        - title: "ğŸ“ Contact"
          payload: "/contact"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_default:
    - text: |
        Je n'ai pas bien compris votre question. ğŸ¤”

        Essayez l'une de ces options, ou tapez une rÃ©fÃ©rence de demande (ex: REF-12345) :
      buttons:
        - title: "ğŸ“‹ Voir mes demandes"
          payload: "/voir_demandes"
        - title: "â• Soumettre une demande"
          payload: "/soumettre_demande"
        - title: "ğŸ“‚ Types de demandes"
          payload: "/types_demandes"
        - title: "â± DÃ©lais de traitement"
          payload: "/delais_traitement"
        - title: "ğŸ“ Contact"
          payload: "/contact"
        - title: "â“ Aide"
          payload: "/demander_aide"

  utter_demander_reference:
    - text: |
        Veuillez me donner la rÃ©fÃ©rence de votre demande (ex: REF-12345).

  utter_autre_question:
    - text: |
        Avez-vous une autre question ?
      buttons:
        - title: "Oui"
          payload: "/affirmer"
        - title: "Non, merci"
          payload: "/nier"

# ========================================
# Actions (actions custom qui appellent l'API Spring Boot)
# ========================================
actions:
  - action_voir_demandes
  - action_chercher_reference

# ========================================
# Session config
# ========================================
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
